== John Lakos' Metrics

This chapter describes the metrics by John Lakos published in Large-Scale C++ Software Design, Addison-Wesley 1996.

=== Depends Upon and Used From

[[john-lakos-metrics:PackagesDependsUpon]]
.Counts the packages this package depends upon inclusive itself
[source,cypher,role=concept,requiresConcepts="dependency:Package"]
----
MATCH (p:Java:Package)
WHERE p.fqn =~ "your.project.johnlakos.*"
CALL apoc.path.subgraphNodes(p, {relationshipFilter: "DEPENDS_ON>", labelFilter:"Package"}) YIELD node
WITH p, count(node) as dependsUpon
SET p.dependsUpon = dependsUpon
RETURN p.fqn AS fqn, dependsUpon
----

[[john-lakos-metrics:PackagesUsedFrom]]
.Counts the packages this package used from inclusive itself
[source,cypher,role=concept,requiresConcepts="dependency:Package"]
----
MATCH (p:Java:Package)
WHERE p.fqn =~ "your.project.johnlakos.*"
CALL apoc.path.subgraphNodes(p, {relationshipFilter: "<DEPENDS_ON", labelFilter:"Package"}) YIELD node
WITH p, count(node) as usedFrom
SET p.usedFrom = usedFrom
RETURN p.fqn AS fqn, usedFrom
----
